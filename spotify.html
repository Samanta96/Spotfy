<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spotify</title>
</head>
<body>
    <script>
        let Numero_canciones=0
        //CREAR MENU
        function imprimirMenu(op){ 
            alert("MENU DEL REPRODUCTOR \n1.BUSCAR CANCION\n2.PARAR CANCION\n3.REPRODUCIR\n4.CREAR LISTA DE REPRODUCCION\n5.SELECCIONAR LISTA DE REPRODUCIION\n6.IMPRMIR CATALOGO DE LA LISTA DE CANCIONES\n7.VER CATALOGO DE DURACION\n8.VER CATALOGO ALFABETICO\n9.SALIR")
        }
        class Cancion{
            nombre;
            duracion;
            _ID;
            genero;
            constructor(nombre="",duracion=0,genero=""){ 
                this.nombre=nombre;
                this.duracion=duracion;
                this.genero=genero;
            }
            set setID(id){ 
                    this._ID=id+1   
            }
            get getID(){ 
            return this._ID
            }
        }
        class Reproductor{
            listadecanciones=[] //Catalogo de todas las canciones
            actual;//ID de la cacion seleccionada
            play=false //Boleana  por defeto es false
            listaDePlayList=[] //Cada elemento de este arreglo es a su vez un arrelgo que cotiene nombre y un arreglo con los numero de las canciones
            agregarcancion(cancion){//(CANCION)	Agregar las canciones al arreglo de lista de canciones
                cancion.setID=this.listadecanciones.length
                this.listadecanciones.push(cancion) 
            }
            //Iprimir nombre de las canciones del arreglo listadecancione y el id
            mostrarCanciones(){ 
                console.log("Lista de canciones")
                this.listadecanciones.forEach(elemento => console.log(elemento._ID+" "+elemento.nombre))
            }
            //El metodo le pide al usuario el id de la cnacion selecionada
            seleccionarCancion(id){  
                this.actual=id 
            }
            //setea play a true
            Play(){ 
                this.play = true 
                console.log("play: "+this.play)
                let posicion=this.listadecanciones.findIndex(elemento => elemento._ID==this.actual)
                console.log("La cancion "+this.listadecanciones[posicion].nombre+" se esta reproduciendo")
            }	
            //setea play a false
            stop(){ 
                this.play = false
                let posicion=this.listadecanciones.findIndex(elemento => elemento._ID==this.actual)
                console.log("play: "+this.play)
                console.log("La cancion "+this.listadecanciones[posicion].nombre +" se pauso")
            }	
            /*(cancion:string):ID de la cancion o falso	Pedir al usuario el nombre de la cancion. Va buscar en la listadecanciones cancion por cancion 
            si hay alguan que concida con el nombre que ingreso el usuario*/
            buscar(nombreCancion) { 
                let idcancion=this.listadecanciones.findIndex(elemento => elemento.nombre==nombreCancion)
                return idcancion!=-1 ?  console.log("El id de la cancion selecconada es: "+this.listadecanciones[idcancion]._ID): console.log("falso")
            } 
            /*Pedir el nombre y le voy a pedir los nuemros de las canciones 
            separados por coma para hacer una arreglo de esas canciones y guardaro. */
            crearListaDeReproducion(nombre,arregloDecanciones){ 
                    let miMusica={name:nombre , id:arregloDecanciones }
                    this.listaDePlayList.push(miMusica)        
            } 

            /*Recibe el nombre y busca en listaDeplayLista si
             la enceuntra escribe el nombre de cada cancion y 
             si nola encuentra regresa falso */
            seleccionarPlaylist(nombre){ 
                let indice=this.listaDePlayList.findIndex(elemento => elemento.name==nombre)
                if (indice!=-1){
                    let encontrarPlayist=this.listaDePlayList[indice].id
                    encontrarPlayist.forEach(elemento => {
                        this.listadecanciones.forEach(c =>{
                            if (elemento==c._ID){
                                console.log(c.nombre)
                            }
                    } )
                 })
                }else{
                    console.log("falso")
                }
            }	
            //Mostrar nombre duracion y id de listadecanciones
            imprimirCatalogo(){ 
                console.log("Catalogo de canciones")
                this.listadecanciones.forEach(elemento => console.log("ID: "+elemento._ID+"  NOMBRE:"+elemento.nombre+"  DURACION DE CANCION: "+elemento.duracion))
            }
            //Si mayor es true voy a imprimr las caciones de mayor a menor duracion de listadecanciones si es falso las imprimo alrreves
            verCatalogoDuarcion(mayor){  
                if(mayor==true){
                let listaBackup=[]
                for(let i=0;i<this.listadecanciones.length;i++){
                    listaBackup[i]=this.listadecanciones[i]
                }
                    listaBackup.sort((a,b)=>{
                        if(a.duracion>b.duracion){
                            return -1
                        }
                        if(a.duracion<b.duracion){
                            return 1
                        }

                        if(a.duracion==b.duracion){
                            return 0
                        }
                })
                console.log(listaBackup)
              }else{
                console.log(this.listadecanciones.reverse())
              } 
            }
            verCatalogoAlfabetico(mayor){ 
                if(mayor==true){
                    let listaBackup2=[]
                    for(let i=0;i<this.listadecanciones.length;i++){
                        listaBackup2[i]=this.listadecanciones[i]
                    }
                        listaBackup2=this.listadecanciones
                        listaBackup2.sort((a,b)=>{
                            if(a.nombre>b.nombre){
                                return -1
                            }
                            if(a.nombre<b.nombre){
                                return 1
                            }
                            if(a.nombre==b.nombre){
                                return 0
                            }
                    
                    })
                    console.log(listaBackup2)
                }else{
                    console.log(this.listadecanciones.reverse())
              } 
            }//Si mayor es tru voy a imprimr las caciones de mayor a menor duracion de listadecanciones si es falso las imprimo alrreves

        }
        //CREAR CANCIONES 
        let cancion1= new Cancion("AMIGO",3,"BALADA")
        let cancion2= new Cancion("ME LLAMAS",3,"BALADA")
        let cancion3= new Cancion("CACHETE, PECHITO, OMBLIGO",2,"CUMBIA")
        let cancion4= new Cancion("AMERICA",3,"BALADA")
        let	cancion5= new Cancion("BAILA MORENA",3,"RUMBA")
        let	cancion6= new Cancion("LET IT BE",3,"B. INGLES")
        let	cancion7= new Cancion("ANGIE",4,"B. INGLES")
        let	cancion8 = new Cancion("UN BESO Y UNA FLOR",3,"BALADA")
        let	cancion9 = new Cancion("CORAZON SALVAJE",2,"CUMBIA")
        let	cancion10 =	new	Cancion("GREASE",3,"ROCK")
        let	cancion11 =	new	Cancion("HOTEL CALIFORNIA",3,"B. INGLES")
        let	cancion12 =	new	Cancion("POPOTITOS",3,"ROCK")
        let cancion13= new Cancion("LA BACHATA",3,"BAHATA")
        let cancion14= new Cancion("MACARENA",4,"RUMBA")
        let cancion15= new Cancion("OJITOS LINDOS",4,"REGUETON")
        //AGREGAR LAS CANCIONES A LA LISTA DE CANCIONES
        let reproductor= new Reproductor();
        reproductor.agregarcancion(cancion1)
        console.log("Numero de canciones: "+ (Numero_canciones=cancion1.getID))
        reproductor.agregarcancion(cancion2)
        console.log("Numero de canciones: "+(Numero_canciones=cancion2.getID))
        reproductor.agregarcancion(cancion3)
        console.log("Numero de canciones: "+(Numero_canciones=cancion3.getID))
        reproductor.agregarcancion(cancion4);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion4.getID))
        reproductor.agregarcancion(cancion5);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion5.getID))
        reproductor.agregarcancion(cancion6);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion6.getID))
        reproductor.agregarcancion(cancion7);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion7.getID))
        reproductor.agregarcancion(cancion8);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion8.getID))
        reproductor.agregarcancion(cancion9);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion9.getID))
        reproductor.agregarcancion(cancion10);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion10.getID))
        reproductor.agregarcancion(cancion11);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion11.getID))
        reproductor.agregarcancion(cancion12);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion12.getID))
        reproductor.agregarcancion(cancion13);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion13.getID))
        reproductor.agregarcancion(cancion14);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion14.getID))
        reproductor.agregarcancion(cancion15);
        console.log("Numero de canciones: "+ (Numero_canciones=cancion15.getID))
        let op
        //INTERACTUAR CON EL MENU
        do {
            imprimirMenu()
            op=window.prompt("ELIJA UN NUMERO DEL MENU")
            switch (op) {
                case "1":
                    reproductor.mostrarCanciones()
                    let idCancionSeleccionada=window.prompt("Seleccione el id de la canción que desea escuchar")
                    let nombre_cancion=window.prompt("Escriba el nombre e la canción")
                    reproductor.seleccionarCancion(idCancionSeleccionada)
                    reproductor.buscar(nombre_cancion)
                break;
                case "2":
                    reproductor.stop()
                break;
                case "3":
                    reproductor.Play()
                    break;
                case "4":
                    let arregloDecanciones=[], nombre
                    let respuesta
                    do {
                        let nombre=window.prompt("Escribe el nombre de la lista de reprodccón que deseas crear")
                        cancionesPlayist=window.prompt("Escribe el id de las canciones que vas añadir em la lista de reprodccion ")
                        arregloDecanciones=cancionesPlayist.split(",")
                        reproductor.crearListaDeReproducion(nombre,arregloDecanciones)
                        respuesta=window.prompt("Deseas añadir otra lista de reproduccion S/N")
                    } while (respuesta=="S");
                    console.log("Lista de Playlists ")
                    console.log(reproductor.listaDePlayList)
                    break;
                case "5":
                    let nombrePlaylist=window.prompt("Escribe el nombre de la lista de reproduccion")
                    console.log("Su Lista de Playlist seleccionada ")
                    reproductor.seleccionarPlaylist(nombrePlaylist) 
                    break;
                case "6":
                    reproductor.imprimirCatalogo()
                    break;
                case "7":
                    let mayorD=window.prompt("Deseas ver tu catalago en de mayor a menor\n1.Si\n2.No")
                    console.log("CATALAGO POR DURACION")
                    mayorD=="1" ? reproductor.verCatalogoDuarcion(true): reproductor.verCatalogoDuarcion(false)
                    break; 
                case "8":
                    let mayorA=window.prompt("Deseas ver tu catalago en orden alfabetico de mayor a menor\n1.Si\n2.No")
                    console.log("CATALAGO POR NOMBRE DE CANCION")
                    mayorA=="1" ? reproductor.verCatalogoAlfabetico(true): reproductor.verCatalogoAlfabetico(false)
                    break;         
                default:
                    break;
            }
        } while (op!="9");
   
    </script>
</body>
</html>